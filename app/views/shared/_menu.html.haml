- if (roots = local_assigns[:roots] || (collection ||= @menu_pages).roots).present?
  - dom_id ||= 'menu'
  - css = [(css || 'menu')].flatten.join(' ')
  - hide_children = RefinerySetting.find_or_set(:menu_hide_children, false) if hide_children.nil?
  .nav{ :id => dom_id, :class => css }
    %ul
      = render :partial => '/shared/menu_branch', :collection => roots, :locals => { :hide_children => hide_children, :sibling_count => (roots.length - 1), :apply_css => true }